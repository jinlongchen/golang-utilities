package geojson

import (
	"fmt"
	"testing"
)

func TestPreload(t *testing.T) {
	Preload()
}
func TestFindGeoFeatureByAddCode(t *testing.T) {
	Preload()
	x := FindGeoFeatureByAddCode(510000)
	fmt.Println(x)
}
func TestConvertCoordinates(t *testing.T) {
	x := `{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "properties": {},
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              121.80816650390625,
              29.60987920220905
            ],
            [
              121.7882537841797,
              29.602118211647333
            ],
            [
              121.74224853515625,
              29.55076123308153
            ],
            [
              121.72233581542967,
              29.541800945377425
            ],
            [
              121.67495727539061,
              29.520293014753662
            ],
            [
              121.62071228027344,
              29.492206334848714
            ],
            [
              121.58432006835936,
              29.48383858387499
            ],
            [
              121.5472412109375,
              29.480252193344267
            ],
            [
              121.53488159179686,
              29.485631731545617
            ],
            [
              121.5252685546875,
              29.495194649851086
            ],
            [
              121.52114868164061,
              29.500573394686963
            ],
            [
              121.50672912597658,
              29.49698759653577
            ],
            [
              121.48818969726561,
              29.48862024048175
            ],
            [
              121.47033691406249,
              29.49280400490176
            ],
            [
              121.41609191894531,
              29.49818287669286
            ],
            [
              121.42570495605467,
              29.477861195816843
            ],
            [
              121.43051147460938,
              29.465905362203006
            ],
            [
              121.43669128417969,
              29.43062744111254
            ],
            [
              121.43669128417969,
              29.40969406712921
            ],
            [
              121.44973754882812,
              29.387559811639232
            ],
            [
              121.4545440673828,
              29.3696095818686
            ],
            [
              121.44630432128906,
              29.35704253755238
            ],
            [
              121.43394470214844,
              29.33010793590839
            ],
            [
              121.41746520996094,
              29.310950111735863
            ],
            [
              121.38587951660156,
              29.295381730939468
            ],
            [
              121.34605407714842,
              29.278613127678454
            ],
            [
              121.32820129394531,
              29.257648503615542
            ],
            [
              121.31790161132811,
              29.234282859513172
            ],
            [
              121.31034851074219,
              29.207315872928152
            ],
            [
              121.31378173828125,
              29.197725900405846
            ],
            [
              121.31446838378905,
              29.158607506749846
            ],
            [
              121.3055419921875,
              29.15351052635239
            ],
            [
              121.29747390747069,
              29.147663678545964
            ],
            [
              121.2981605529785,
              29.142416224118758
            ],
            [
              121.2971305847168,
              29.131470671166
            ],
            [
              121.29798889160156,
              29.1193242415304
            ],
            [
              121.30022048950197,
              29.11182572937499
            ],
            [
              121.30348205566405,
              29.101326894220097
            ],
            [
              121.30004882812499,
              29.084376514925058
            ],
            [
              121.35498046875,
              29.092777051650614
            ],
            [
              121.40304565429688,
              29.102376825931888
            ],
            [
              121.43531799316406,
              29.105376571809618
            ],
            [
              121.46896362304688,
              29.10297678210166
            ],
            [
              121.47994995117188,
              29.10777630556152
            ],
            [
              121.51908874511717,
              29.11017598335443
            ],
            [
              121.58020019531249,
              29.113175501898862
            ],
            [
              121.5973663330078,
              29.111375801265375
            ],
            [
              121.68182373046875,
              29.10357673477438
            ],
            [
              121.69006347656249,
              29.105376571809618
            ],
            [
              121.70242309570312,
              29.113175501898862
            ],
            [
              121.72782897949219,
              29.13177056485816
            ],
            [
              121.761474609375,
              29.146164433198408
            ],
            [
              121.80473327636719,
              29.150961941299688
            ],
            [
              121.83013916015624,
              29.150961941299688
            ],
            [
              121.84524536132811,
              29.152161283318915
            ],
            [
              121.8548583984375,
              29.150961941299688
            ],
            [
              121.8775177001953,
              29.157558149111228
            ],
            [
              121.8939971923828,
              29.167751455150153
            ],
            [
              121.91665649414062,
              29.177344230436756
            ],
            [
              121.94137573242186,
              29.185737173254434
            ],
            [
              121.97158813476561,
              29.200123477644983
            ],
            [
              121.97296142578124,
              29.214507763499352
            ],
            [
              121.96952819824217,
              29.23667958136449
            ],
            [
              121.97914123535156,
              29.253455062958732
            ],
            [
              121.99699401855469,
              29.25704945119038
            ],
            [
              122.01141357421875,
              29.28819552373639
            ],
            [
              122.00729370117188,
              29.300172254822073
            ],
            [
              121.98669433593749,
              29.298375834704206
            ],
            [
              121.9757080078125,
              29.28220663151896
            ],
            [
              121.96884155273436,
              29.28160772298835
            ],
            [
              121.95922851562501,
              29.288794393648296
            ],
            [
              121.95030212402344,
              29.291189838184863
            ],
            [
              121.93519592285156,
              29.28819552373639
            ],
            [
              121.9317626953125,
              29.295381730939468
            ],
            [
              121.937255859375,
              29.31154884819602
            ],
            [
              121.95030212402344,
              29.334298230315675
            ],
            [
              121.93656921386719,
              29.34746660583952
            ],
            [
              121.93107604980469,
              29.359436379841345
            ],
            [
              121.94137573242186,
              29.386961521657504
            ],
            [
              121.95236206054688,
              29.400721300994977
            ],
            [
              121.97708129882812,
              29.423450770207985
            ],
            [
              121.99081420898439,
              29.447968968702895
            ],
            [
              121.97914123535156,
              29.467698827122206
            ],
            [
              121.96746826171875,
              29.48324086093357
            ],
            [
              121.96197509765625,
              29.490413303532524
            ],
            [
              121.97708129882812,
              29.504756665392367
            ],
            [
              121.9709014892578,
              29.509537334569846
            ],
            [
              121.95716857910155,
              29.512525138164015
            ],
            [
              121.94343566894533,
              29.51551285356557
            ],
            [
              121.94412231445314,
              29.52567042617583
            ],
            [
              121.95236206054688,
              29.545385155773786
            ],
            [
              121.96609497070312,
              29.562707047643396
            ],
            [
              121.98257446289062,
              29.578234494739206
            ],
            [
              121.9921875,
              29.581817412664453
            ],
            [
              121.99836730957031,
              29.58957996518711
            ],
            [
              121.99081420898439,
              29.591371238663804
            ],
            [
              121.9921875,
              29.597341920567366
            ],
            [
              121.97845458984375,
              29.59555075310085
            ],
            [
              121.97914123535156,
              29.60092416008231
            ],
            [
              121.97227478027342,
              29.607491268736506
            ],
            [
              121.97776794433594,
              29.616445727622548
            ],
            [
              121.96746826171875,
              29.6194303704904
            ],
            [
              121.95373535156249,
              29.623011825257162
            ],
            [
              121.95716857910155,
              29.629577495054555
            ],
            [
              121.95167541503906,
              29.637336371325397
            ],
            [
              121.937255859375,
              29.6385299915468
            ],
            [
              121.9317626953125,
              29.64509464986076
            ],
            [
              121.91184997558595,
              29.643304330949537
            ],
            [
              121.87683105468749,
              29.618833448987818
            ],
            [
              121.87683105468749,
              29.621818021144485
            ],
            [
              121.85279846191406,
              29.622414924968727
            ],
            [
              121.80816650390625,
              29.60987920220905
            ]
          ]
        ]
      }
    }
  ]
}`
	y := ConvertCoordinates(x, "WGS84", "GCJ02")
	// y = {"type":"FeatureCollection","features":[{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[120.2894934519714,30.296109544400824],[120.29084630232784,30.29633359208483],[120.29503401323177,30.296172422995305],[120.30886746993808,30.291153946604563],[120.314174152009,30.286678888384444],[120.31548489705332,30.286885068903523],[120.31778410060586,30.28677805234859],[120.32178088618625,30.284950896626775],[120.32670172977976,30.280716517489076],[120.34017545216643,30.269048117190106],[120.3513278497366,30.26141397259789],[120.35523851272333,30.261087163767755],[120.35528144893671,30.260642395792644],[120.36391828010487,30.26102714525813],[120.36675394000595,30.262143490550518],[120.37306901890776,30.266192708731268],[120.37728919385471,30.27010850220056],[120.37924338249432,30.272158627775912],[120.38084316935202,30.27424528568135],[120.38320512000584,30.277657609938277],[120.38533081060106,30.28219983657279],[120.38754754313656,30.286732511397837],[120.39505501823848,30.302718803151457],[120.40376671053542,30.32135890461149],[120.40539735290673,30.328249965109],[120.42743727401461,30.37787156510465],[120.40008306479874,30.39224638301123],[120.37612861949842,30.387044442707307],[120.35344329554836,30.377605381234105],[120.33633710432645,30.371500844547345],[120.32739672728636,30.36903967108579],[120.32009009636685,30.367989032299846],[120.31751145659771,30.367984296095212],[120.31673756460084,30.364131408618285],[120.3140728792143,30.361386060776756],[120.30925971884389,30.358118538876802],[120.30522047928598,30.35537109474248],[120.30264237075012,30.352700259346914],[120.29954870876779,30.347510041888334],[120.2974863850859,30.343654776255036],[120.29662702111055,30.340838367707416],[120.29645488026617,30.33698566558723],[120.29598209828539,30.33368806979283],[120.29413461765006,30.32809160869742],[120.2935330692033,30.325460450015843],[120.29353262137585,30.320014326138505],[120.29280207961988,30.315530273910376],[120.291706467493,30.31084178155017],[120.29073981967666,30.307135212802812],[120.29020273547633,30.304207235398973],[120.28945068549113,30.298295875070945],[120.2894934519714,30.296109544400824]]]},"properties":null}]}
	println(y)
}