package geojson

import (
	"fmt"
	"testing"
)

func TestPreload(t *testing.T) {
	Preload()
}
func TestFindGeoFeatureByAddCode(t *testing.T) {
	Preload()
	x := FindGeoFeatureByAddCode(510000)
	fmt.Println(x)
}
func TestConvertCoordinates(t *testing.T) {
	x := `{"type":"FeatureCollection","features":[{"type":"Feature","properties":{},"geometry":{"type":"Polygon","coordinates":[[[120.28501510620117,30.2985370874141],[120.28636693954466,30.298759407982576],[120.2905511856079,30.29859266760347],[120.30436992645262,30.293553269043045],[120.30966997146606,30.289069468813437],[120.31097888946532,30.2892732823614],[120.31327486038207,30.28916211138775],[120.31726598739623,30.287327772132002],[120.32217979431151,30.283084573128505],[120.33563375473021,30.27139166485842],[120.34677028656006,30.263737707556317],[120.35067558288574,30.2634041074699],[120.35071849822998,30.26295930559166],[120.35934448242188,30.263329973963433],[120.36217689514159,30.264441970683485],[120.36848545074463,30.26848211943128],[120.37270188331603,30.27239238029706],[120.37465453147888,30.27444010879461],[120.37625312805176,30.276524856363352],[120.37861347198485,30.279934481386384],[120.38073778152466,30.28447428733503],[120.38295328617096,30.289004618959353],[120.39045810699461,30.304984179240755],[120.39916992187499,30.323619077413664],[120.40080070495605,30.330509016942763],[120.42285919189455,30.380131886953297],[120.39547920227051,30.394495599764554],[120.37153244018553,30.389313060289677],[120.34887313842773,30.379909751104847],[120.3317928314209,30.373837842423747],[120.32286643981932,30.371394162984508],[120.31557083129881,30.370357432042177],[120.31299591064452,30.370357432042177],[120.31222343444823,30.366506620871316],[120.30956268310545,30.36376652827535],[120.30475616455078,30.360507939850336],[120.30072212219238,30.357767679190857],[120.29814720153809,30.355101405951],[120.29505729675292,30.3499167777479],[120.29299736022949,30.346065161818082],[120.29213905334473,30.34325042354528],[120.29196739196776,30.33939854526374],[120.29149532318115,30.336102105998044],[120.2896499633789,30.330509016942763],[120.28904914855957,30.32787904345712],[120.28904914855957,30.322433662608873],[120.28831958770752,30.317951183212276],[120.28722524642944,30.313264735478924],[120.28625965118408,30.309559875095765],[120.28572320938109,30.306632936371162],[120.28497219085693,30.300723217778742],[120.28501510620117,30.2985370874141]]]}}]}`
	y := ConvertCoordinates(x, "WGS84", "GCJ02")
	// y = {"type":"FeatureCollection","features":[{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[120.2894934519714,30.296109544400824],[120.29084630232784,30.29633359208483],[120.29503401323177,30.296172422995305],[120.30886746993808,30.291153946604563],[120.314174152009,30.286678888384444],[120.31548489705332,30.286885068903523],[120.31778410060586,30.28677805234859],[120.32178088618625,30.284950896626775],[120.32670172977976,30.280716517489076],[120.34017545216643,30.269048117190106],[120.3513278497366,30.26141397259789],[120.35523851272333,30.261087163767755],[120.35528144893671,30.260642395792644],[120.36391828010487,30.26102714525813],[120.36675394000595,30.262143490550518],[120.37306901890776,30.266192708731268],[120.37728919385471,30.27010850220056],[120.37924338249432,30.272158627775912],[120.38084316935202,30.27424528568135],[120.38320512000584,30.277657609938277],[120.38533081060106,30.28219983657279],[120.38754754313656,30.286732511397837],[120.39505501823848,30.302718803151457],[120.40376671053542,30.32135890461149],[120.40539735290673,30.328249965109],[120.42743727401461,30.37787156510465],[120.40008306479874,30.39224638301123],[120.37612861949842,30.387044442707307],[120.35344329554836,30.377605381234105],[120.33633710432645,30.371500844547345],[120.32739672728636,30.36903967108579],[120.32009009636685,30.367989032299846],[120.31751145659771,30.367984296095212],[120.31673756460084,30.364131408618285],[120.3140728792143,30.361386060776756],[120.30925971884389,30.358118538876802],[120.30522047928598,30.35537109474248],[120.30264237075012,30.352700259346914],[120.29954870876779,30.347510041888334],[120.2974863850859,30.343654776255036],[120.29662702111055,30.340838367707416],[120.29645488026617,30.33698566558723],[120.29598209828539,30.33368806979283],[120.29413461765006,30.32809160869742],[120.2935330692033,30.325460450015843],[120.29353262137585,30.320014326138505],[120.29280207961988,30.315530273910376],[120.291706467493,30.31084178155017],[120.29073981967666,30.307135212802812],[120.29020273547633,30.304207235398973],[120.28945068549113,30.298295875070945],[120.2894934519714,30.296109544400824]]]},"properties":null}]}
	println(y)
}